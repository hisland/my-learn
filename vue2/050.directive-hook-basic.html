<!doctype html>
<meta charset="utf-8">

<div id="app">
  <div class="compa">
    <button @click="setRandom">set</button>
    <button @click="show=!show">toggle</button>

    <h1 v-if="show" v-sample>{{what}}</h1>
  </div>
</div>
<pre>
</pre>
<script crossorigin="anonymous"
  integrity="sha384-+jvb+jCJ37FkNjPyYLI3KJzQeD8pPFXUra3B/QJFqQ3txYrUPIP1eOfxK4h3cKZP"
  src="https://lib.baomitu.com/vue/2.6.11/vue.js"></script>
<script>
  let vm = new Vue({
    el: '#app',
    data() {
      return {
        what: 'hey1',
        show: false,
      };
    },
    methods: {
      setRandom() {
        this.what = Math.random()
      }
    },
    directives: {
      'sample': {
        bind(el, binding, vnode, oldVnode) {
          console.log('bind', el, binding, vnode, oldVnode)
        },
        inserted(el, binding, vnode, oldVnode) {
          console.log('inserted', el, binding, vnode, oldVnode)
        },
        update(el, binding, vnode, oldVnode) { // need to make sure children are done updating (vs. `update`)
          console.log('update', el, binding, vnode, oldVnode)
        },
        componentUpdated(el, binding, vnode, oldVnode) { // need to make sure children are done updating (vs. `update`)
          console.log('componentUpdated', el, binding, vnode, oldVnode)
        },
        unbind(el, binding, vnode, oldVnode) {
          console.log('unbind', el, binding, vnode, oldVnode)
        }
      }
    }
  })
</script>
